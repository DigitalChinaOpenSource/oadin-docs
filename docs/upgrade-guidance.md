# Oadin 版本变更与升级指南

## 当前版本信息

**当前版本**: v0.2.0 (预览版)

**发布状态**: 预览版本，功能和稳定性正在不断完善中

## 版本历史与变更记录

### v0.2.0 (当前预览版)

#### 新增功能
- ✅ Chat 聊天服务支持
- ✅ Embed 嵌入服务支持
- ✅ Ollama 引擎集成
- ✅ 流式对话支持
- ✅ 工具调用功能
- ✅ 思考模式 (Thinking Mode)
- ✅ RAG 上下文增强
- ✅ 会话管理和标题生成
- ✅ OpenAI API 兼容层
- ✅ 本地与云端混合调度

#### 技术特性
- RESTful API 设计
- 自动 API 转换 (OpenAI/Ollama 风格)
- 统一的 AI 服务层
- 模型共享机制
- 一站式 AI 服务安装

#### 已知限制
- 仅支持 chat 和 embed 服务
- 底层仅支持 ollama 引擎
- 功能仍在完善中

### 规划中的版本

#### v0.3.0 (开发中)
**预期发布**: TBD

**计划新增功能**:
- 🔄 文生图服务 (Text-to-Image)
- 🔄 音频相关服务
- 🔄 更多 AI 引擎支持
- 🔄 更多模型格式支持
- 🔄 增强的模型管理

## 升级指南

### 从 v0.1.x 升级到 v0.2.0

由于这是预览版本，具体的升级步骤将在后续正式版本中提供。

### 准备升级到 v0.3.0

#### 配置文件兼容性
当前的 `.oadin` 配置文件格式在 v0.3.0 中将保持向下兼容：

```json
{
  "version": "0.2",
  "service": {
    "chat": {
      "models": ["qwen2.5:0.5b", "qwen2.5:7b"]
    },
    "text-to-image": {
      "models": ["stable-diffusion-1.5-int4"]
    }
  }
}
```

#### API 兼容性
- v0.2.0 的 API 端点将在 v0.3.0 中继续支持
- 新的 API 功能将通过新的端点提供
- 现有的 API 调用无需修改

#### 数据迁移
- 会话数据和消息历史将自动迁移
- 模型文件无需重新下载
- 配置设置将保持不变

## 破坏性变更说明

### v0.2.0 中的变更
目前为预览版本，API 可能会有调整，建议：
- 不要在生产环境中使用
- 及时关注版本更新
- 提交发现的问题到 Issues

### 未来版本的潜在破坏性变更
- API 端点可能会调整
- 配置文件格式可能会扩展
- 某些实验性功能可能会被移除或重构

## 迁移最佳实践

### 开发环境迁移
1. **备份当前配置**
   ```bash
   # 备份 Oadin 配置
   cp ~/.oadin/config.json ~/.oadin/config.json.backup
   ```

2. **停止当前服务**
   ```bash
   oadin server stop
   ```

3. **更新到新版本**
   ```bash
   # 下载新版本
   # 替换可执行文件
   ```

4. **启动新服务**
   ```bash
   oadin server start
   ```

### 应用程序迁移
1. **更新 OadinChecker 组件**
   - 替换 `OadinChecker.dll`
   - 检查 API 调用兼容性

2. **测试应用功能**
   - 验证聊天服务
   - 测试嵌入服务
   - 检查工具调用

3. **更新 .oadin 配置文件**
   - 根据新版本特性调整配置
   - 添加新的服务依赖

## 版本检查和管理

### 检查当前版本
```bash
oadin version
```

### 检查服务状态
```bash
oadin get services
```

### 检查模型状态
```bash
oadin get models
```

## 问题排查

### 升级后常见问题

#### 服务无法启动
```bash
# 检查日志
oadin server logs

# 重置配置
oadin server reset
```

#### API 调用失败
```bash
# 验证服务状态
curl http://localhost:16688/oadin/v0.2/health

# 检查端点可用性
oadin get services chat
```

#### 模型加载失败
```bash
# 重新拉取模型
oadin pull qwen2.5:0.5b -for chat

# 检查模型状态
oadin get models --provider local_ollama_chat
```

## 社区支持

- **问题反馈**: 通过 GitHub Issues 提交问题
- **功能建议**: 通过 Issues 提交功能请求
- **文档改进**: 欢迎提交文档改进建议

## 未来路线图

### 短期目标 (v0.3.0)
- 文生图服务完整实现
- 音频处理服务
- 更多 AI 引擎支持

### 中期目标 (v0.4.0+)
- 企业级部署支持
- 高可用性配置
- 性能优化

### 长期目标 (v1.0.0+)
- 完整的生产环境支持
- 丰富的生态系统
- 标准化的 AI 服务接口

---

**注意**: 由于当前为预览版本，此升级指南会随着版本发布不断更新。请定期检查最新的升级说明。